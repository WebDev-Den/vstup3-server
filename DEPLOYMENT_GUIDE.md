# üöÄ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ —Ä–æ–ª–µ–π –∑ –¥–µ–∫–∞–Ω–∞–º–∏

## üìã –û–≥–ª—è–¥ –∑–º—ñ–Ω

–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ —Ç—Ä–∏—Ä—ñ–≤–Ω–µ–≤—É —Å–∏—Å—Ç–µ–º—É —Ä–æ–ª–µ–π:
- **user** (role_id=1) - –∑–≤–∏—á–∞–π–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á
- **admin** (role_id=2) - –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –∑ –ø–æ–≤–Ω–∏–º –¥–æ—Å—Ç—É–ø–æ–º
- **dean** (role_id=3) - –¥–µ–∫–∞–Ω —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É –∑ –æ–±–º–µ–∂–µ–Ω–∏–º –¥–æ—Å—Ç—É–ø–æ–º –¥–æ —Å–≤–æ–≥–æ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É

## üóÑÔ∏è –ö—Ä–æ–∫ 1: –ú—ñ–≥—Ä–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

### –í–∏–∫–æ–Ω–∞–π—Ç–µ SQL –º—ñ–≥—Ä–∞—Ü—ñ—é

```bash
mysql -u user_vstup -p db_vstup < migrations/001_add_faculty_id_to_users.sql
```

–ê–±–æ –≤–∏–∫–æ–Ω–∞–π—Ç–µ SQL –≤—Ä—É—á–Ω—É:

```sql
-- –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–ª—è faculty_id
ALTER TABLE users
ADD COLUMN IF NOT EXISTS faculty_id VARCHAR(50) NULL
COMMENT 'ID —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É –¥–ª—è —Ä–æ–ª—ñ –¥–µ–∫–∞–Ω–∞';

-- –î–æ–¥–∞–≤–∞–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—ñ–≤
CREATE INDEX IF NOT EXISTS idx_users_faculty_id ON users(faculty_id);
CREATE INDEX IF NOT EXISTS idx_users_role ON users(role);
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º—ñ–≥—Ä–∞—Ü—ñ—ó

```sql
DESCRIBE users;
-- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ —î –ø–æ–ª–µ faculty_id VARCHAR(50) NULL

SELECT COUNT(*) FROM users;
-- –í—Å—ñ —ñ—Å–Ω—É—é—á—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –ø–æ–≤–∏–Ω–Ω—ñ –º–∞—Ç–∏ faculty_id = NULL
```

## üìù –ö—Ä–æ–∫ 2: –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–¥—É

–í—Å—ñ –∑–º—ñ–Ω–∏ –≤–∂–µ –≤–Ω–µ—Å–µ–Ω—ñ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤:

### –ú–æ–¥–µ–ª—ñ:
- ‚úÖ `models/Auth.php` - –¥–æ–¥–∞–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É faculty_id —Ç–∞ role_id=3

### –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏:
- ‚úÖ `controllers/Auth.php` - –æ–Ω–æ–≤–ª–µ–Ω–æ PUT /api/v3.0/auth/role
- ‚úÖ `controllers/Applicant.php` - –¥–æ–¥–∞–Ω–æ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é –¥–ª—è –¥–µ–∫–∞–Ω—ñ–≤

### –ú—ñ–≥—Ä–∞—Ü—ñ—ó:
- ‚úÖ `migrations/001_add_faculty_id_to_users.sql`

## üîß –ö—Ä–æ–∫ 3: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–ñ–æ–¥–Ω–∏—Ö –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ. –í—Å—ñ –∑–º—ñ–Ω–∏ –∑–≤–æ—Ä–æ—Ç–Ω—å–æ —Å—É–º—ñ—Å–Ω—ñ.

## üìö API Endpoints - –©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è

### ‚ú® –ù–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

#### PUT /api/v3.0/auth/role
**–ë—É–ª–æ:**
```json
{
  "userId": 5,
  "roleId": 2
}
```

**–°—Ç–∞–ª–æ:**
```json
{
  "userId": 5,
  "roleId": 3,
  "facultyId": "fit"  // –û–±–æ–≤'—è–∑–∫–æ–≤–æ –¥–ª—è roleId=3
}
```

**–ü—Ä–∏–∫–ª–∞–¥–∏:**
```bash
# –ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
curl -X PUT https://vstup.khmnu.edu.ua/api/v3.0/auth/role \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"userId": 5, "roleId": 2}'

# –ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ –¥–µ–∫–∞–Ω–∞ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É FIT
curl -X PUT https://vstup.khmnu.edu.ua/api/v3.0/auth/role \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"userId": 5, "roleId": 3, "facultyId": "fit"}'
```

### üîÑ –û–Ω–æ–≤–ª–µ–Ω—ñ endpoints

#### GET /api/v3.0/auth/users
**–í—ñ–¥–ø–æ–≤—ñ–¥—å —Ç–µ–ø–µ—Ä –≤–∫–ª—é—á–∞—î:**
```json
{
  "users": [
    {
      "id": 5,
      "email": "dean@example.com",
      "fio": "–Ü–≤–∞–Ω–æ–≤ –Ü–≤–∞–Ω –Ü–≤–∞–Ω–æ–≤–∏—á",
      "specialty": "–ö–æ–º–ø'—é—Ç–µ—Ä–Ω—ñ –Ω–∞—É–∫–∏",
      "role_name": "dean",
      "role_id": 3,
      "is_active": true,
      "faculty_id": "fit"  // ‚Üê –ù–û–í–ï –ü–û–õ–ï
    }
  ]
}
```

#### GET /api/v3.0/auth/profile
**–í—ñ–¥–ø–æ–≤—ñ–¥—å —Ç–µ–ø–µ—Ä –≤–∫–ª—é—á–∞—î:**
```json
{
  "user": {
    "id": 5,
    "fio": "–Ü–≤–∞–Ω–æ–≤ –Ü–≤–∞–Ω –Ü–≤–∞–Ω–æ–≤–∏—á",
    "email": "dean@example.com",
    "is_active": true,
    "specialty": "–ö–æ–º–ø'—é—Ç–µ—Ä–Ω—ñ –Ω–∞—É–∫–∏",
    "role_name": "dean",
    "role_id": 3,
    "faculty_id": "fit"  // ‚Üê –ù–û–í–ï –ü–û–õ–ï
  }
}
```

#### POST /api/v3.0/auth/login
**–í—ñ–¥–ø–æ–≤—ñ–¥—å —Ç–µ–ø–µ—Ä –≤–∫–ª—é—á–∞—î:**
```json
{
  "tokens": {...},
  "user": {
    "id": 5,
    "fio": "–Ü–≤–∞–Ω–æ–≤ –Ü–≤–∞–Ω –Ü–≤–∞–Ω–æ–≤–∏—á",
    "email": "dean@example.com",
    "is_active": true,
    "specialty": "–ö–æ–º–ø'—é—Ç–µ—Ä–Ω—ñ –Ω–∞—É–∫–∏",
    "role_name": "dean",
    "role_id": 3,
    "faculty_id": "fit"  // ‚Üê –ù–û–í–ï –ü–û–õ–ï
  }
}
```

#### GET /api/v3.0/applicant/requests
**–ü–æ–≤–µ–¥—ñ–Ω–∫–∞ –¥–ª—è –¥–µ–∫–∞–Ω—ñ–≤:**
- –î–µ–∫–∞–Ω–∏ –±–∞—á–∞—Ç—å **—Ç—ñ–ª—å–∫–∏** –∑–∞—è–≤–∫–∏ —Å–≤–æ–≥–æ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É
- –ü–∞—Ä–∞–º–µ—Ç—Ä `faculty` —ñ–≥–Ω–æ—Ä—É—î—Ç—å—Å—è –¥–ª—è –¥–µ–∫–∞–Ω—ñ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è —Ñ—ñ–ª—å—Ç—Ä `faculty = faculty_id` –¥–µ–∫–∞–Ω–∞

**–ü—Ä–∏–∫–ª–∞–¥:**
```bash
# –î–ª—è –∞–¥–º—ñ–Ω–∞ - –ø–æ–≤–µ—Ä—Ç–∞—î –≤—Å—ñ –∑–∞—è–≤–∫–∏
GET /api/v3.0/applicant/requests

# –î–ª—è –¥–µ–∫–∞–Ω–∞ FIT - –ø–æ–≤–µ—Ä—Ç–∞—î —Ç—ñ–ª—å–∫–∏ –∑–∞—è–≤–∫–∏ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É FIT
GET /api/v3.0/applicant/requests
# –ù–∞–≤—ñ—Ç—å —è–∫—â–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ ?faculty=fmf, –¥–µ–∫–∞–Ω FIT –≤—Å–µ –æ–¥–Ω–æ –ø–æ–±–∞—á–∏—Ç—å —Ç—ñ–ª—å–∫–∏ FIT
```

#### POST /api/v3.0/applicant/requests
**–ü–æ–≤–µ–¥—ñ–Ω–∫–∞ –¥–ª—è –¥–µ–∫–∞–Ω—ñ–≤:**
- –î–µ–∫–∞–Ω–∏ –º–æ–∂—É—Ç—å —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∑–∞—è–≤–∫–∏ **—Ç—ñ–ª—å–∫–∏** –¥–ª—è —Å–≤–æ–≥–æ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É
- –ü–æ–ª–µ `faculty_key` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –≤ `faculty_id` –¥–µ–∫–∞–Ω–∞

#### PUT /api/v3.0/applicant/requests/{id}
**–ü–æ–≤–µ–¥—ñ–Ω–∫–∞ –¥–ª—è –¥–µ–∫–∞–Ω—ñ–≤:**
- –î–µ–∫–∞–Ω–∏ –º–æ–∂—É—Ç—å —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ **—Ç—ñ–ª—å–∫–∏** –∑–∞—è–≤–∫–∏ —Å–≤–æ–≥–æ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É
- –ü–æ–≤–µ—Ä—Ç–∞—î 403 Forbidden —è–∫—â–æ –∑–∞—è–≤–∫–∞ –Ω–µ –Ω–∞–ª–µ–∂–∏—Ç—å —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É –¥–µ–∫–∞–Ω–∞

#### DELETE /api/v3.0/applicant/requests/{id}
**–ü–æ–≤–µ–¥—ñ–Ω–∫–∞ –¥–ª—è –¥–µ–∫–∞–Ω—ñ–≤:**
- –î–µ–∫–∞–Ω–∏ –º–æ–∂—É—Ç—å –≤–∏–¥–∞–ª—è—Ç–∏ **—Ç—ñ–ª—å–∫–∏** –∑–∞—è–≤–∫–∏ —Å–≤–æ–≥–æ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É
- –ü–æ–≤–µ—Ä—Ç–∞—î 403 Forbidden —è–∫—â–æ –∑–∞—è–≤–∫–∞ –Ω–µ –Ω–∞–ª–µ–∂–∏—Ç—å —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É –¥–µ–∫–∞–Ω–∞

#### GET /api/v3.0/applicant/pdf/{id}/{type}
**–ü–æ–≤–µ–¥—ñ–Ω–∫–∞ –¥–ª—è –¥–µ–∫–∞–Ω—ñ–≤:**
- –î–µ–∫–∞–Ω–∏ –º–æ–∂—É—Ç—å –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ PDF **—Ç—ñ–ª—å–∫–∏** –¥–ª—è –∑–∞—è–≤–æ–∫ —Å–≤–æ–≥–æ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É
- –ü–æ–≤–µ—Ä—Ç–∞—î 403 Forbidden —è–∫—â–æ –∑–∞—è–≤–∫–∞ –Ω–µ –Ω–∞–ª–µ–∂–∏—Ç—å —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É –¥–µ–∫–∞–Ω–∞

## üîê –ë–µ–∑–ø–µ–∫–∞

### –ë–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø—É:

1. **–ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è** - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ JWT —Ç–æ–∫–µ–Ω—É
2. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è** - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
3. **–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö** - –ø—Ä–∏–º—É—Å–æ–≤–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –¥–ª—è –¥–µ–∫–∞–Ω—ñ–≤
4. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–ª–∞—Å–Ω–æ—Å—Ç—ñ** - –ø—Ä–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—ñ/–≤–∏–¥–∞–ª–µ–Ω–Ω—ñ

### –ü—Ä–∏–∫–ª–∞–¥ –∑–∞—Ö–∏—Å—Ç—É:

```php
// 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–ª—ñ
$user = \App\Core\Validate::roles(['admin', 'dean']);

// 2. –ü—Ä–∏–º—É—Å–æ–≤–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –¥–ª—è –¥–µ–∫–∞–Ω—ñ–≤
if ($user['role_name'] === 'dean' && !empty($user['faculty_id'])) {
    $props['faculty'] = $user['faculty_id'];
}

// 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–ª–∞—Å–Ω–æ—Å—Ç—ñ –ø—Ä–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—ñ
if ($user['role_name'] === 'dean') {
    $item = \App\Models\Applicant::getItemByID($id);
    if ($item['faculty_key'] !== $user['faculty_id']) {
        \App\Core\Response::forbidden('Access denied');
    }
}
```

## ‚úÖ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 1. –¢–µ—Å—Ç –º—ñ–≥—Ä–∞—Ü—ñ—ó –ë–î

```sql
-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É
DESCRIBE users;

-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —ñ—Å–Ω—É—é—á–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
SELECT id, email, role, faculty_id FROM users;
```

### 2. –¢–µ—Å—Ç –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –¥–µ–∫–∞–Ω–∞

```bash
# –ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–µ–∫–∞–Ω–æ–º FIT
curl -X PUT https://vstup.khmnu.edu.ua/api/v3.0/auth/role \
  -H "Authorization: Bearer ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"userId": 5, "roleId": 3, "facultyId": "fit"}'
```

### 3. –¢–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –¥–µ–∫–∞–Ω–∞

```bash
# –ê–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è —è–∫ –¥–µ–∫–∞–Ω
curl -X POST https://vstup.khmnu.edu.ua/api/v3.0/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email": "dean@example.com", "password": "password123"}'

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ —É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —î faculty_id
```

### 4. –¢–µ—Å—Ç —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –∑–∞—è–≤–æ–∫

```bash
# –ê–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è —è–∫ –¥–µ–∫–∞–Ω FIT
# –û—Ç—Ä–∏–º–∞—Ç–∏ –∑–∞—è–≤–∫–∏ - –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ —Ç—ñ–ª—å–∫–∏ FIT
curl -X GET https://vstup.khmnu.edu.ua/api/v3.0/applicant/requests \
  -H "Authorization: Bearer DEAN_TOKEN"
```

### 5. –¢–µ—Å—Ç –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É

```bash
# –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –æ—Ç—Ä–∏–º–∞—Ç–∏ –∑–∞—è–≤–∫—É —ñ–Ω—à–æ–≥–æ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É
# –ü–æ–≤–∏–Ω–Ω–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ 403 Forbidden
curl -X GET https://vstup.khmnu.edu.ua/api/v3.0/applicant/requests/123 \
  -H "Authorization: Bearer DEAN_TOKEN"
```

## üîÑ –ó–≤–æ—Ä–æ—Ç–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å

### ‚úÖ –ì–∞—Ä–∞–Ω—Ç—ñ—ó:

- –í—Å—ñ —ñ—Å–Ω—É—é—á—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –ø—Ä–∞—Ü—é—é—Ç—å –±–µ–∑ –∑–º—ñ–Ω
- –ü–æ–ª–µ `faculty_id` NULL –¥–ª—è –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∫—Ä—ñ–º –¥–µ–∫–∞–Ω—ñ–≤
- API endpoints –∑ role_id=1 —Ç–∞ role_id=2 –ø—Ä–∞—Ü—é—é—Ç—å —è–∫ —Ä–∞–Ω—ñ—à–µ
- –°—Ç–∞—Ä—ñ –∫–ª—ñ—î–Ω—Ç–∏ –ø—Ä–æ–¥–æ–≤–∂—É—é—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ (–ø—Ä–æ—Å—Ç–æ —ñ–≥–Ω–æ—Ä—É—é—Ç—å faculty_id)

### ‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ:

- –î–µ–∫–∞–Ω–∏ **–ø–æ–≤–∏–Ω–Ω—ñ** –º–∞—Ç–∏ `faculty_id` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π
- –ü—Ä–∏ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—ñ —Ä–æ–ª—ñ dean –±–µ–∑ facultyId - –ø–æ–º–∏–ª–∫–∞
- –ü—Ä–∏ –∑–º—ñ–Ω—ñ —Ä–æ–ª—ñ –∑ dean –Ω–∞ —ñ–Ω—à—É - faculty_id –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—á–∏—â—É—î—Ç—å—Å—è

## üìä –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –°—Ü–µ–Ω–∞—Ä—ñ–π 1: –ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ –¥–µ–∫–∞–Ω–∞

```bash
# 1. –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∞–±–æ –∑–Ω–∞–π—Ç–∏ —ñ—Å–Ω—É—é—á–æ–≥–æ
# 2. –ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ —Ä–æ–ª—å dean –∑ facultyId
curl -X PUT https://vstup.khmnu.edu.ua/api/v3.0/auth/role \
  -H "Authorization: Bearer ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"userId": 5, "roleId": 3, "facultyId": "fit"}'
```

### –°—Ü–µ–Ω–∞—Ä—ñ–π 2: –î–µ–∫–∞–Ω –ø–µ—Ä–µ–≥–ª—è–¥–∞—î –∑–∞—è–≤–∫–∏

```bash
# –î–µ–∫–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑—É—î—Ç—å—Å—è
curl -X POST https://vstup.khmnu.edu.ua/api/v3.0/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email": "dean@fit.edu", "password": "pass123"}'

# –û—Ç—Ä–∏–º—É—î —Ç–æ–∫–µ–Ω —Ç–∞ –±–∞—á–∏—Ç—å faculty_id —É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

# –ó–∞–ø–∏—Ç—É—î —Å–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫
curl -X GET https://vstup.khmnu.edu.ua/api/v3.0/applicant/requests \
  -H "Authorization: Bearer DEAN_TOKEN"

# –ë–∞—á–∏—Ç—å —Ç—ñ–ª—å–∫–∏ –∑–∞—è–≤–∫–∏ —Å–≤–æ–≥–æ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É
```

### –°—Ü–µ–Ω–∞—Ä—ñ–π 3: –ó–Ω—è—Ç–∏ –¥–µ–∫–∞–Ω–∞ –∑ –ø–æ—Å–∞–¥–∏

```bash
# –ó–º—ñ–Ω–∏—Ç–∏ —Ä–æ–ª—å –Ω–∞ user –∞–±–æ admin
curl -X PUT https://vstup.khmnu.edu.ua/api/v3.0/auth/role \
  -H "Authorization: Bearer ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"userId": 5, "roleId": 1}'

# faculty_id –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–∞–Ω–µ NULL
```

## üêõ Troubleshooting

### –ü–æ–º–∏–ª–∫–∞: "Faculty ID is required for dean role"

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∏–∑–Ω–∞—á–∞—î—Ç–µ roleId=3 –±–µ–∑ facultyId

**–†—ñ—à–µ–Ω–Ω—è:**
```json
{
  "userId": 5,
  "roleId": 3,
  "facultyId": "fit"  // –î–æ–¥–∞–π—Ç–µ —Ü–µ –ø–æ–ª–µ
}
```

### –ü–æ–º–∏–ª–∫–∞: 403 "You can only edit applications from your faculty"

**–ü—Ä–∏—á–∏–Ω–∞:** –î–µ–∫–∞–Ω –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –∑–∞—è–≤–∫—É —ñ–Ω—à–æ–≥–æ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É

**–†—ñ—à–µ–Ω–Ω—è:** –î–µ–∫–∞–Ω–∞–º –¥–æ–∑–≤–æ–ª–µ–Ω–æ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –∑–∞—è–≤–∫–∏ —Å–≤–æ–≥–æ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É

### –î–µ–∫–∞–Ω –Ω–µ –±–∞—á–∏—Ç—å –∂–æ–¥–Ω–∏—Ö –∑–∞—è–≤–æ–∫

**–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏:**
1. faculty_id –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π - –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ GET /api/v3.0/auth/profile
2. –ù–µ–º–∞—î –∑–∞—è–≤–æ–∫ –¥–ª—è —Ü—å–æ–≥–æ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É - –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ë–î
3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π faculty_id - –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ faculty_id –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∫–ª—é—á—É —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–ü—Ä–∏ –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—ñ –ø—Ä–æ–±–ª–µ–º:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î (DESCRIBE users)
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –º—ñ–≥—Ä–∞—Ü—ñ—è –≤–∏–∫–æ–Ω–∞–Ω–∞
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π faculty_id

## üìù Changelog

### v3.0 - 2025-11-29
- ‚ú® –î–æ–¥–∞–Ω–æ —Ä–æ–ª—å "–î–µ–∫–∞–Ω —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—É" (role_id=3)
- ‚ú® –î–æ–¥–∞–Ω–æ –ø–æ–ª–µ faculty_id –¥–æ —Ç–∞–±–ª–∏—Ü—ñ users
- ‚ú® –î–æ–¥–∞–Ω–æ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é –∑–∞—è–≤–æ–∫ –¥–ª—è –¥–µ–∫–∞–Ω—ñ–≤
- ‚ú® –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø—É –¥–ª—è –¥–µ–∫–∞–Ω—ñ–≤
- ‚ôªÔ∏è –û–Ω–æ–≤–ª–µ–Ω–æ API endpoints –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ faculty_id
- üîí –ü–æ—Å–∏–ª–µ–Ω–æ –±–µ–∑–ø–µ–∫—É - –ø—Ä–∏–º—É—Å–æ–≤–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –¥–ª—è –¥–µ–∫–∞–Ω—ñ–≤
- ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–æ –∑–≤–æ—Ä–æ—Ç–Ω—É —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å
